var photoRepository=function(){var a=[],e="17795524-3cd93801424773114b97b5b02",t=$(".dataLoading"),o=$(".hideNoHits"),n=$("#modalReopen"),i=$(".modalHere");function d(e){a.push(e),s(e)}function s(a){var e=$(".row"),n=$(`<button\n      style="background-image: url(${a.preview});\n        background-size:cover;\n        background-repeat: no-repeat;"\n      type="button"\n      data-toggle="modal"\n      data-target="#photoModal"\n      class="btn photoButton\n       text-right\n       col-sm-2\n       m-lg-3">\n      Pixabay ID:<br>${a.pixID}\n      </button>`);e.append(n),function(a,e){a.on("click",function(){!function(a){i.removeClass("is-visible"),i.empty(),l(t),r(o),function(a,e,t,o,n,d){i.HTML="";var s=$('<div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="modalTitle"></div>'),l=$('<div class="modal-dialog" role="document"></div>'),p=$('<div class="modal-content" id="modalWindow"></div>'),r=$('<div class="modal-header"></div>'),c=$(`<h1 id="modalTitle" class="modal-title">Search Tags: ${e}</h1>`),m=$('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),u=$('<div class="modal-body list-group"></div>'),g=$(`<h3 class="list-group-item" style="color:#0a0091">Pixabay ID: ${t}</h3>`),h=$(`<a class="list-group-item" href="${n}" target="_blank">View fullsize image</a>`),b=$(`<a class="list-group-item" href="${d}" target="_blank">Leave comment</a>`),v=$(`<img style="max-width:700px height:auto" class="photoImage" alt="Larger image" src ="${o}">`),f=$('<div class="modal-footer"></div>'),y=$('<button class="btn modal-close" data-dismiss="modal">Close</button>');f.append(y),u.append(g).append(h).append(b).append(v),r.append(c).append(m),p.append(r).append(u).append(f),l.append(p),s.append(l),i.append(s)}(a.preview,a.tags,a.pixID,a.webSize,a.largeImage,a.pageURL),p(t)}(e)})}(n,a)}function l(a){a.removeClass("hideDataLoading")}function p(a){a.addClass("hideDataLoading")}function r(a){a.removeClass("noHits"),n.removeClass("disabled")}function c(i="landscape+monochrome"){l(t),r(o);var s=`https://pixabay.com/api/?key=${e}&per_page=60&q=${i}&image_type=photo?`;return $.ajax(s,{dataType:"json"}).then(function(e){parseInt(e.totalHits)>0?(a=[],$(".row").html(""),$.each(e.hits,function(a,e){d({pixID:e.id,tags:e.tags,preview:e.previewURL,webSize:e.webformatURL,largeImage:e.largeImageURL,pageURL:e.pageURL}),p(t)})):(a=[],$(".row").html(""),p(t),function(a){a.addClass("noHits"),n.addClass("disabled")}(o))})}return $("#submitButton").on("click",function(a){a.preventDefault(),c($("#userChoice").val())}),$(window).on("keydown",function(a){"Enter"===a.key&&(a.preventDefault(),c($("#userChoice").val()))}),{add:d,getAll:function(){return a},addListItem:s,loadList:c}}();photoRepository.loadList().then(function(){photoRepository.getAll().forEach(function(a){photoRepository.addListItem(a)})});
