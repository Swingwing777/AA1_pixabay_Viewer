var photoRepository=function(){var a=[],e="get_API_KEY_pixaBay.com",t=$(".dataLoading"),o=$(".hideNoHits"),i=$("#modalReopen"),n=$(".modalHere");function d(e){a.push(e),s(e)}function s(a){var e=$(".row"),i=$(`<button\n      style="background-image: url(${a.webSize});\n        background-size:cover;\n        background-repeat:no-repeat;"\n      type="button"\n      data-toggle="modal"\n      data-target="#photoModal"\n      class="btn photoButton\n       text-right\n       col-12 col-sm-3\n       m-2 m-sm-3">\n      Pixabay ID:<br>${a.pixID}\n      </button>`);e.append(i),function(a,e){a.on("click",function(){!function(a){n.removeClass("is-visible"),n.empty(),l(t),r(o),function(a,e,t,o,i,d){n.HTML="";var s=$('<div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="modalTitle"></div>'),l=$('<div class="modal-dialog" role="document"></div>'),p=$('<div class="modal-content" id="modalWindow"></div>'),r=$('<div class="modal-header"></div>'),c=$(`<h1 id="modalTitle" class="modal-title">Search Tags: ${e}</h1>`),m=$('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),u=$('<div class="modal-body list-group"></div>'),g=$(`<h3 class="list-group-item" style="color:#0a0091">Pixabay ID: ${t}</h3>`),h=$(`<a class="list-group-item" href="${i}" target="_blank">View fullsize image</a>`),v=$(`<a class="list-group-item" href="${d}" target="_blank">Leave comment</a>`),b=$('<div class="imgContainer list-group-item"></div>'),f=$(`<img class="photoImage" alt="Larger image" src ="${o}">`),y=$('<div class="modal-footer"></div>'),L=$('<button class="btn modal-close" data-dismiss="modal">Close</button>');y.append(L),b.append(f),u.append(g).append(h).append(v).append(b),r.append(c).append(m),p.append(r).append(u).append(y),l.append(p),s.append(l),n.append(s)}(a.preview,a.tags,a.pixID,a.webSize,a.largeImage,a.pageURL),p(t)}(e)})}(i,a)}function l(a){a.removeClass("hideDataLoading")}function p(a){a.addClass("hideDataLoading")}function r(a){a.removeClass("noHits"),i.removeClass("disabled")}function c(n="landscape+monochrome"){l(t),r(o);var s=`https://pixabay.com/api/?key=${e}&per_page=60&q=${n}&image_type=photo?`;return $.ajax(s,{dataType:"json"}).then(function(e){parseInt(e.totalHits)>0?(a=[],$(".row").html(""),$.each(e.hits,function(a,e){d({pixID:e.id,tags:e.tags,preview:e.previewURL,webSize:e.webformatURL,largeImage:e.largeImageURL,pageURL:e.pageURL}),p(t)})):(a=[],$(".row").html(""),p(t),function(a){a.addClass("noHits"),i.addClass("disabled")}(o))})}return $("#submitButton").on("click",function(a){a.preventDefault(),c($("#userChoice").val())}),$(window).on("keydown",function(a){"Enter"===a.key&&(a.preventDefault(),c($("#userChoice").val()))}),{add:d,getAll:function(){return a},addListItem:s,loadList:c}}();photoRepository.loadList().then(function(){photoRepository.getAll().forEach(function(a){photoRepository.addListItem(a)})});
