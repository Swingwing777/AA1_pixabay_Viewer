var photoRepository=function(){var a=[],e="17795524-3cd93801424773114b97b5b02",t=$(".dataLoading"),o=$(".modalHere");function n(e){a.push(e),i(e)}function i(a){var e=$(".row"),n=$(`<button\n      style="background-image: url(${a.preview});\n        background-size:cover;\n        background-repeat: no-repeat;"\n      type="button"\n      data-toggle="modal"\n      data-target="#photoModal"\n      class="btn photoButton\n       text-right\n       col-sm-2\n       m-lg-3">\n      Pixabay ID:<br>${a.pixID}\n      </button>`);e.append(n),function(a,e){a.on("click",function(a){!function(a){console.log(a),o.removeClass("is-visible"),o.empty(),d(t),function(a,e,t,n,i,d){o.HTML="";var l=$('<div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="modalTitle"></div>'),s=$('<div class="modal-dialog" role="document"></div>'),p=$('<div class="modal-content" id="modalWindow"></div>'),r=$('<div class="modal-header"></div>'),c=$(`<h1 id="modalTitle" class="modal-title">Search Tags: ${e}</h1>`),u=$('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),m=$('<div class="modal-body list-group"></div>'),t=$(`<h3 class="list-group-item" style="color:#0a0091">Pixabay ID: ${t}</h3>`),g=$(`<a class="list-group-item" href="${i}" target="_blank">View fullsize image</a>`),h=$(`<a class="list-group-item" href="${d}" target="_blank">Leave comment</a>`),b=$(`<img style="max-width:700px" class="photoImage" alt="Larger image" src ="${n}">`),v=$('<div class="modal-footer"></div>'),f=$('<button class="btn modal-close" data-dismiss="modal">Close</button>');v.append(f),m.append(t).append(g).append(h).append(b),r.append(c).append(u),p.append(r).append(m).append(v),s.append(p),l.append(s),o.append(l)}(a.preview,a.tags,a.pixID,a.webSize,a.largeImage,a.pageURL),l(t)}(e)})}(n,a)}function d(a){a.removeClass("hideDataLoading")}function l(a){a.addClass("hideDataLoading")}function s(o="landscape+monochrome"){d(t);var i=`https://pixabay.com/api/?key=${e}&per_page=60&q=${o}&image_type=photo?`;return $.ajax(i,{dataType:"json"}).then(function(e){e.hits?(a=[],$(".row").html(""),$.each(e.hits,function(a,e){n({pixID:e.id,tags:e.tags,preview:e.previewURL,webSize:e.webformatURL,largeImage:e.largeImageURL,pageURL:e.pageURL}),l(t)})):(l(t),console.log("No hits"))})}return $("#submitButton").on("click",function(a){a.preventDefault(),s($("#userChoice").val())}),$(window).on("keydown",function(a){"Enter"===a.key&&(a.preventDefault(),s($("#userChoice").val()))}),{add:n,getAll:function(){return a},addListItem:i,loadList:s}}();photoRepository.loadList().then(function(a){photoRepository.getAll().forEach(function(a){photoRepository.addListItem(a)})});
